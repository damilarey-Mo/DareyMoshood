import{r as u,j as le}from"./components-BEVlEQcB.js";import{u as lt,i as Qe,g as ut,c as it,b as dt,m as pt,L as ht,t as mt}from"./heading-CcgLg--t.js";import{S as ft}from"./section-CImFuiBC.js";import{u as gt}from"./image-DB6rRj2u.js";import{u as bt}from"./useWindowSize-CZUHPkza.js";import{R as yt,s as Et,E as wt,l as Q,Q as et,e as je,O as He,u as tt,V as ce,v as Re,T as Pe,w as _t,H as Se,F as Ge,x as Ye,b as Ce,y as Tt,z as Rt,B as Pt,I as St,W as Mt,h as nt,o as xt,S as vt,J as At,K as Lt,A as Dt,D as jt,r as Ct,c as Ot,a as kt,N as Ve,q as It,X as Nt,m as Ft,Y as zt,t as Ht,Z as Yt,_ as Bt}from"./three-CbWf-STM.js";import{t as Gt}from"./throttle-BgiUmwhn.js";import{u as Te}from"./use-spring-jzPCatCZ.js";import"./config-DohaZlFR.js";import"./index-D5Qb4_P8.js";const at=(s,o,m)=>{if(m){if(Math.min(s,o)===s)return o;if(Math.max(s,m)===s)return m}else return Math.max(s,o)===o?s:o;return s};var Ut=Object.defineProperty,Vt=(s,o,m)=>o in s?Ut(s,o,{enumerable:!0,configurable:!0,writable:!0,value:m}):s[o]=m,i=(s,o,m)=>(Vt(s,typeof o!="symbol"?o+"":o,m),m);const Be=new yt,ot=new Et,Zt=Math.cos(70*(Math.PI/180)),rt=(s,o)=>(s%o+o)%o;class Xt extends wt{constructor(o,m){super(),i(this,"object"),i(this,"domElement"),i(this,"enabled",!0),i(this,"target",new Q),i(this,"minDistance",0),i(this,"maxDistance",1/0),i(this,"minZoom",0),i(this,"maxZoom",1/0),i(this,"minPolarAngle",0),i(this,"maxPolarAngle",Math.PI),i(this,"minAzimuthAngle",-1/0),i(this,"maxAzimuthAngle",1/0),i(this,"enableDamping",!1),i(this,"dampingFactor",.05),i(this,"enableZoom",!0),i(this,"zoomSpeed",1),i(this,"enableRotate",!0),i(this,"rotateSpeed",1),i(this,"enablePan",!0),i(this,"panSpeed",1),i(this,"screenSpacePanning",!0),i(this,"keyPanSpeed",7),i(this,"zoomToCursor",!1),i(this,"autoRotate",!1),i(this,"autoRotateSpeed",2),i(this,"reverseOrbit",!1),i(this,"reverseHorizontalOrbit",!1),i(this,"reverseVerticalOrbit",!1),i(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),i(this,"mouseButtons",{LEFT:Re.ROTATE,MIDDLE:Re.DOLLY,RIGHT:Re.PAN}),i(this,"touches",{ONE:Pe.ROTATE,TWO:Pe.DOLLY_PAN}),i(this,"target0"),i(this,"position0"),i(this,"zoom0"),i(this,"_domElementKeyEvents",null),i(this,"getPolarAngle"),i(this,"getAzimuthalAngle"),i(this,"setPolarAngle"),i(this,"setAzimuthalAngle"),i(this,"getDistance"),i(this,"listenToKeyEvents"),i(this,"stopListenToKeyEvents"),i(this,"saveState"),i(this,"reset"),i(this,"update"),i(this,"connect"),i(this,"dispose"),this.object=o,this.domElement=m,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>_.phi,this.getAzimuthalAngle=()=>_.theta,this.setPolarAngle=t=>{let n=rt(t,2*Math.PI),c=_.phi;c<0&&(c+=2*Math.PI),n<0&&(n+=2*Math.PI);let S=Math.abs(n-c);2*Math.PI-S<S&&(n<c?n+=2*Math.PI:c+=2*Math.PI),C.phi=n-c,e.update()},this.setAzimuthalAngle=t=>{let n=rt(t,2*Math.PI),c=_.theta;c<0&&(c+=2*Math.PI),n<0&&(n+=2*Math.PI);let S=Math.abs(n-c);2*Math.PI-S<S&&(n<c?n+=2*Math.PI:c+=2*Math.PI),C.theta=n-c,e.update()},this.getDistance=()=>e.object.position.distanceTo(e.target),this.listenToKeyEvents=t=>{t.addEventListener("keydown",pe),this._domElementKeyEvents=t},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",pe),this._domElementKeyEvents=null},this.saveState=()=>{e.target0.copy(e.target),e.position0.copy(e.object.position),e.zoom0=e.object.zoom},this.reset=()=>{e.target.copy(e.target0),e.object.position.copy(e.position0),e.object.zoom=e.zoom0,e.object.updateProjectionMatrix(),e.dispatchEvent(J),e.update(),w=p.NONE},this.update=(()=>{const t=new Q,n=new Q(0,1,0),c=new et().setFromUnitVectors(o.up,n),S=c.clone().invert(),B=new Q,he=new et,Ee=2*Math.PI;return function(){const Je=e.object.position;c.setFromUnitVectors(o.up,n),S.copy(c).invert(),t.copy(Je).sub(e.target),t.applyQuaternion(c),_.setFromVector3(t),e.autoRotate&&w===p.NONE&&d(L()),e.enableDamping?(_.theta+=C.theta*e.dampingFactor,_.phi+=C.phi*e.dampingFactor):(_.theta+=C.theta,_.phi+=C.phi);let me=e.minAzimuthAngle,fe=e.maxAzimuthAngle;isFinite(me)&&isFinite(fe)&&(me<-Math.PI?me+=Ee:me>Math.PI&&(me-=Ee),fe<-Math.PI?fe+=Ee:fe>Math.PI&&(fe-=Ee),me<=fe?_.theta=Math.max(me,Math.min(fe,_.theta)):_.theta=_.theta>(me+fe)/2?Math.max(me,_.theta):Math.min(fe,_.theta)),_.phi=Math.max(e.minPolarAngle,Math.min(e.maxPolarAngle,_.phi)),_.makeSafe(),e.enableDamping===!0?e.target.addScaledVector(re,e.dampingFactor):e.target.add(re),e.zoomToCursor&&f||e.object.isOrthographicCamera?_.radius=O(_.radius):_.radius=O(_.radius*G),t.setFromSpherical(_),t.applyQuaternion(S),Je.copy(e.target).add(t),e.object.matrixAutoUpdate||e.object.updateMatrix(),e.object.lookAt(e.target),e.enableDamping===!0?(C.theta*=1-e.dampingFactor,C.phi*=1-e.dampingFactor,re.multiplyScalar(1-e.dampingFactor)):(C.set(0,0,0),re.set(0,0,0));let Ae=!1;if(e.zoomToCursor&&f){let Le=null;if(e.object instanceof je&&e.object.isPerspectiveCamera){const De=t.length();Le=O(De*G);const ze=De-Le;e.object.position.addScaledVector(te,ze),e.object.updateMatrixWorld()}else if(e.object.isOrthographicCamera){const De=new Q(a.x,a.y,0);De.unproject(e.object),e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom/G)),e.object.updateProjectionMatrix(),Ae=!0;const ze=new Q(a.x,a.y,0);ze.unproject(e.object),e.object.position.sub(ze).add(De),e.object.updateMatrixWorld(),Le=t.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),e.zoomToCursor=!1;Le!==null&&(e.screenSpacePanning?e.target.set(0,0,-1).transformDirection(e.object.matrix).multiplyScalar(Le).add(e.object.position):(Be.origin.copy(e.object.position),Be.direction.set(0,0,-1).transformDirection(e.object.matrix),Math.abs(e.object.up.dot(Be.direction))<Zt?o.lookAt(e.target):(ot.setFromNormalAndCoplanarPoint(e.object.up,e.target),Be.intersectPlane(ot,e.target))))}else e.object instanceof He&&e.object.isOrthographicCamera&&(Ae=G!==1,Ae&&(e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom/G)),e.object.updateProjectionMatrix()));return G=1,f=!1,Ae||B.distanceToSquared(e.object.position)>V||8*(1-he.dot(e.object.quaternion))>V?(e.dispatchEvent(J),B.copy(e.object.position),he.copy(e.object.quaternion),Ae=!1,!0):!1}})(),this.connect=t=>{e.domElement=t,e.domElement.style.touchAction="none",e.domElement.addEventListener("contextmenu",ve),e.domElement.addEventListener("pointerdown",z),e.domElement.addEventListener("pointercancel",E),e.domElement.addEventListener("wheel",$)},this.dispose=()=>{var t,n,c,S,B,he;e.domElement&&(e.domElement.style.touchAction="auto"),(t=e.domElement)==null||t.removeEventListener("contextmenu",ve),(n=e.domElement)==null||n.removeEventListener("pointerdown",z),(c=e.domElement)==null||c.removeEventListener("pointercancel",E),(S=e.domElement)==null||S.removeEventListener("wheel",$),(B=e.domElement)==null||B.ownerDocument.removeEventListener("pointermove",U),(he=e.domElement)==null||he.ownerDocument.removeEventListener("pointerup",E),e._domElementKeyEvents!==null&&e._domElementKeyEvents.removeEventListener("keydown",pe)};const e=this,J={type:"change"},R={type:"start"},l={type:"end"},p={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let w=p.NONE;const V=1e-6,_=new tt,C=new tt;let G=1;const re=new Q,M=new ce,j=new ce,W=new ce,H=new ce,Y=new ce,k=new ce,g=new ce,ee=new ce,se=new ce,te=new Q,a=new ce;let f=!1;const r=[],b={};function L(){return 2*Math.PI/60/60*e.autoRotateSpeed}function x(){return Math.pow(.95,e.zoomSpeed)}function d(t){e.reverseOrbit||e.reverseHorizontalOrbit?C.theta+=t:C.theta-=t}function y(t){e.reverseOrbit||e.reverseVerticalOrbit?C.phi+=t:C.phi-=t}const T=(()=>{const t=new Q;return function(c,S){t.setFromMatrixColumn(S,0),t.multiplyScalar(-c),re.add(t)}})(),ie=(()=>{const t=new Q;return function(c,S){e.screenSpacePanning===!0?t.setFromMatrixColumn(S,1):(t.setFromMatrixColumn(S,0),t.crossVectors(e.object.up,t)),t.multiplyScalar(c),re.add(t)}})(),ne=(()=>{const t=new Q;return function(c,S){const B=e.domElement;if(B&&e.object instanceof je&&e.object.isPerspectiveCamera){const he=e.object.position;t.copy(he).sub(e.target);let Ee=t.length();Ee*=Math.tan(e.object.fov/2*Math.PI/180),T(2*c*Ee/B.clientHeight,e.object.matrix),ie(2*S*Ee/B.clientHeight,e.object.matrix)}else B&&e.object instanceof He&&e.object.isOrthographicCamera?(T(c*(e.object.right-e.object.left)/e.object.zoom/B.clientWidth,e.object.matrix),ie(S*(e.object.top-e.object.bottom)/e.object.zoom/B.clientHeight,e.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),e.enablePan=!1)}})();function K(t){e.object instanceof je&&e.object.isPerspectiveCamera||e.object instanceof He&&e.object.isOrthographicCamera?G/=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function Z(t){e.object instanceof je&&e.object.isPerspectiveCamera||e.object instanceof He&&e.object.isOrthographicCamera?G*=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function ue(t){if(!e.zoomToCursor||!e.domElement)return;f=!0;const n=e.domElement.getBoundingClientRect(),c=t.clientX-n.left,S=t.clientY-n.top,B=n.width,he=n.height;a.x=c/B*2-1,a.y=-(S/he)*2+1,te.set(a.x,a.y,1).unproject(e.object).sub(e.object.position).normalize()}function O(t){return Math.max(e.minDistance,Math.min(e.maxDistance,t))}function I(t){M.set(t.clientX,t.clientY)}function ae(t){ue(t),g.set(t.clientX,t.clientY)}function be(t){H.set(t.clientX,t.clientY)}function we(t){j.set(t.clientX,t.clientY),W.subVectors(j,M).multiplyScalar(e.rotateSpeed);const n=e.domElement;n&&(d(2*Math.PI*W.x/n.clientHeight),y(2*Math.PI*W.y/n.clientHeight)),M.copy(j),e.update()}function _e(t){ee.set(t.clientX,t.clientY),se.subVectors(ee,g),se.y>0?K(x()):se.y<0&&Z(x()),g.copy(ee),e.update()}function ye(t){Y.set(t.clientX,t.clientY),k.subVectors(Y,H).multiplyScalar(e.panSpeed),ne(k.x,k.y),H.copy(Y),e.update()}function Me(t){ue(t),t.deltaY<0?Z(x()):t.deltaY>0&&K(x()),e.update()}function Oe(t){let n=!1;switch(t.code){case e.keys.UP:ne(0,e.keyPanSpeed),n=!0;break;case e.keys.BOTTOM:ne(0,-e.keyPanSpeed),n=!0;break;case e.keys.LEFT:ne(e.keyPanSpeed,0),n=!0;break;case e.keys.RIGHT:ne(-e.keyPanSpeed,0),n=!0;break}n&&(t.preventDefault(),e.update())}function ke(){if(r.length==1)M.set(r[0].pageX,r[0].pageY);else{const t=.5*(r[0].pageX+r[1].pageX),n=.5*(r[0].pageY+r[1].pageY);M.set(t,n)}}function Ie(){if(r.length==1)H.set(r[0].pageX,r[0].pageY);else{const t=.5*(r[0].pageX+r[1].pageX),n=.5*(r[0].pageY+r[1].pageY);H.set(t,n)}}function P(){const t=r[0].pageX-r[1].pageX,n=r[0].pageY-r[1].pageY,c=Math.sqrt(t*t+n*n);g.set(0,c)}function v(){e.enableZoom&&P(),e.enablePan&&Ie()}function D(){e.enableZoom&&P(),e.enableRotate&&ke()}function X(t){if(r.length==1)j.set(t.pageX,t.pageY);else{const c=Ue(t),S=.5*(t.pageX+c.x),B=.5*(t.pageY+c.y);j.set(S,B)}W.subVectors(j,M).multiplyScalar(e.rotateSpeed);const n=e.domElement;n&&(d(2*Math.PI*W.x/n.clientHeight),y(2*Math.PI*W.y/n.clientHeight)),M.copy(j)}function q(t){if(r.length==1)Y.set(t.pageX,t.pageY);else{const n=Ue(t),c=.5*(t.pageX+n.x),S=.5*(t.pageY+n.y);Y.set(c,S)}k.subVectors(Y,H).multiplyScalar(e.panSpeed),ne(k.x,k.y),H.copy(Y)}function F(t){const n=Ue(t),c=t.pageX-n.x,S=t.pageY-n.y,B=Math.sqrt(c*c+S*S);ee.set(0,B),se.set(0,Math.pow(ee.y/g.y,e.zoomSpeed)),K(se.y),g.copy(ee)}function A(t){e.enableZoom&&F(t),e.enablePan&&q(t)}function de(t){e.enableZoom&&F(t),e.enableRotate&&X(t)}function z(t){var n,c;e.enabled!==!1&&(r.length===0&&((n=e.domElement)==null||n.ownerDocument.addEventListener("pointermove",U),(c=e.domElement)==null||c.ownerDocument.addEventListener("pointerup",E)),Ne(t),t.pointerType==="touch"?oe(t):h(t))}function U(t){e.enabled!==!1&&(t.pointerType==="touch"?xe(t):N(t))}function E(t){var n,c,S;Fe(t),r.length===0&&((n=e.domElement)==null||n.releasePointerCapture(t.pointerId),(c=e.domElement)==null||c.ownerDocument.removeEventListener("pointermove",U),(S=e.domElement)==null||S.ownerDocument.removeEventListener("pointerup",E)),e.dispatchEvent(l),w=p.NONE}function h(t){let n;switch(t.button){case 0:n=e.mouseButtons.LEFT;break;case 1:n=e.mouseButtons.MIDDLE;break;case 2:n=e.mouseButtons.RIGHT;break;default:n=-1}switch(n){case Re.DOLLY:if(e.enableZoom===!1)return;ae(t),w=p.DOLLY;break;case Re.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(e.enablePan===!1)return;be(t),w=p.PAN}else{if(e.enableRotate===!1)return;I(t),w=p.ROTATE}break;case Re.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(e.enableRotate===!1)return;I(t),w=p.ROTATE}else{if(e.enablePan===!1)return;be(t),w=p.PAN}break;default:w=p.NONE}w!==p.NONE&&e.dispatchEvent(R)}function N(t){if(e.enabled!==!1)switch(w){case p.ROTATE:if(e.enableRotate===!1)return;we(t);break;case p.DOLLY:if(e.enableZoom===!1)return;_e(t);break;case p.PAN:if(e.enablePan===!1)return;ye(t);break}}function $(t){e.enabled===!1||e.enableZoom===!1||w!==p.NONE&&w!==p.ROTATE||(t.preventDefault(),e.dispatchEvent(R),Me(t),e.dispatchEvent(l))}function pe(t){e.enabled===!1||e.enablePan===!1||Oe(t)}function oe(t){switch($e(t),r.length){case 1:switch(e.touches.ONE){case Pe.ROTATE:if(e.enableRotate===!1)return;ke(),w=p.TOUCH_ROTATE;break;case Pe.PAN:if(e.enablePan===!1)return;Ie(),w=p.TOUCH_PAN;break;default:w=p.NONE}break;case 2:switch(e.touches.TWO){case Pe.DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;v(),w=p.TOUCH_DOLLY_PAN;break;case Pe.DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;D(),w=p.TOUCH_DOLLY_ROTATE;break;default:w=p.NONE}break;default:w=p.NONE}w!==p.NONE&&e.dispatchEvent(R)}function xe(t){switch($e(t),w){case p.TOUCH_ROTATE:if(e.enableRotate===!1)return;X(t),e.update();break;case p.TOUCH_PAN:if(e.enablePan===!1)return;q(t),e.update();break;case p.TOUCH_DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;A(t),e.update();break;case p.TOUCH_DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;de(t),e.update();break;default:w=p.NONE}}function ve(t){e.enabled!==!1&&t.preventDefault()}function Ne(t){r.push(t)}function Fe(t){delete b[t.pointerId];for(let n=0;n<r.length;n++)if(r[n].pointerId==t.pointerId){r.splice(n,1);return}}function $e(t){let n=b[t.pointerId];n===void 0&&(n=new ce,b[t.pointerId]=n),n.set(t.pageX,t.pageY)}function Ue(t){const n=t.pointerId===r[0].pointerId?r[1]:r[0];return b[n.pointerId]}m!==void 0&&this.connect(m),this.update()}}class Wt extends _t{constructor(o){super(o),this.type=Se}parse(o){const l=function(a,f){switch(a){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(f||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(f||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(f||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(f||""))}},_=`
`,C=function(a,f,r){f=f||1024;let L=a.pos,x=-1,d=0,y="",T=String.fromCharCode.apply(null,new Uint16Array(a.subarray(L,L+128)));for(;0>(x=T.indexOf(_))&&d<f&&L<a.byteLength;)y+=T,d+=T.length,L+=128,T+=String.fromCharCode.apply(null,new Uint16Array(a.subarray(L,L+128)));return-1<x?(a.pos+=d+x+1,y+T.slice(0,x)):!1},G=function(a){const f=/^#\?(\S+)/,r=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,b=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,L=/^\s*FORMAT=(\S+)\s*$/,x=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,d={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let y,T;for((a.pos>=a.byteLength||!(y=C(a)))&&l(1,"no header found"),(T=y.match(f))||l(3,"bad initial token"),d.valid|=1,d.programtype=T[1],d.string+=y+`
`;y=C(a),y!==!1;){if(d.string+=y+`
`,y.charAt(0)==="#"){d.comments+=y+`
`;continue}if((T=y.match(r))&&(d.gamma=parseFloat(T[1])),(T=y.match(b))&&(d.exposure=parseFloat(T[1])),(T=y.match(L))&&(d.valid|=2,d.format=T[1]),(T=y.match(x))&&(d.valid|=4,d.height=parseInt(T[1],10),d.width=parseInt(T[2],10)),d.valid&2&&d.valid&4)break}return d.valid&2||l(3,"missing format specifier"),d.valid&4||l(3,"missing image size specifier"),d},re=function(a,f,r){const b=f;if(b<8||b>32767||a[0]!==2||a[1]!==2||a[2]&128)return new Uint8Array(a);b!==(a[2]<<8|a[3])&&l(3,"wrong scanline width");const L=new Uint8Array(4*f*r);L.length||l(4,"unable to allocate buffer space");let x=0,d=0;const y=4*b,T=new Uint8Array(4),ie=new Uint8Array(y);let ne=r;for(;ne>0&&d<a.byteLength;){d+4>a.byteLength&&l(1),T[0]=a[d++],T[1]=a[d++],T[2]=a[d++],T[3]=a[d++],(T[0]!=2||T[1]!=2||(T[2]<<8|T[3])!=b)&&l(3,"bad rgbe scanline format");let K=0,Z;for(;K<y&&d<a.byteLength;){Z=a[d++];const O=Z>128;if(O&&(Z-=128),(Z===0||K+Z>y)&&l(3,"bad scanline data"),O){const I=a[d++];for(let ae=0;ae<Z;ae++)ie[K++]=I}else ie.set(a.subarray(d,d+Z),K),K+=Z,d+=Z}const ue=b;for(let O=0;O<ue;O++){let I=0;L[x]=ie[O+I],I+=b,L[x+1]=ie[O+I],I+=b,L[x+2]=ie[O+I],I+=b,L[x+3]=ie[O+I],x+=4}ne--}return L},M=function(a,f,r,b){const L=a[f+3],x=Math.pow(2,L-128)/255;r[b+0]=a[f+0]*x,r[b+1]=a[f+1]*x,r[b+2]=a[f+2]*x,r[b+3]=1},j=function(a,f,r,b){const L=a[f+3],x=Math.pow(2,L-128)/255;r[b+0]=Ye.toHalfFloat(Math.min(a[f+0]*x,65504)),r[b+1]=Ye.toHalfFloat(Math.min(a[f+1]*x,65504)),r[b+2]=Ye.toHalfFloat(Math.min(a[f+2]*x,65504)),r[b+3]=Ye.toHalfFloat(1)},W=new Uint8Array(o);W.pos=0;const H=G(W),Y=H.width,k=H.height,g=re(W.subarray(W.pos),Y,k);let ee,se,te;switch(this.type){case Ge:te=g.length/4;const a=new Float32Array(te*4);for(let r=0;r<te;r++)M(g,r*4,a,r*4);ee=a,se=Ge;break;case Se:te=g.length/4;const f=new Uint16Array(te*4);for(let r=0;r<te;r++)j(g,r*4,f,r*4);ee=f,se=Se;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:Y,height:k,data:ee,header:H.string,gamma:H.gamma,exposure:H.exposure,type:se}}setDataType(o){return this.type=o,this}load(o,m,e,J){function R(l,p){switch(l.type){case Ge:case Se:"colorSpace"in l?l.colorSpace="srgb-linear":l.encoding=3e3,l.minFilter=Ce,l.magFilter=Ce,l.generateMipmaps=!1,l.flipY=!0;break}m&&m(l,p)}return super.load(o,R,e,J)}}class Kt extends Tt{constructor(o){super(o),this.hdrLoader=new Wt,this.type=Se}load(o,m,e,J){typeof o=="string"?o=[o]:Array.isArray(o)||(console.warn("THREE.HDRCubeTextureLoader signature has changed. Use .setDataType() instead."),this.setDataType(o),o=m,m=e,e=J,J=arguments[4]);const R=new Rt;switch(R.type=this.type,R.type){case Ge:case Se:"colorSpace"in R?R.colorSpace="srgb-linear":R.encoding=3e3,R.minFilter=Ce,R.magFilter=Ce,R.generateMipmaps=!1;break}const l=this;let p=0;function w(V,_,C,G){new Pt(l.manager).setPath(l.path).setResponseType("arraybuffer").setWithCredentials(l.withCredentials).load(o[V],function(re){p++;const M=l.hdrLoader.parse(re);if(M){if(M.data!==void 0){const j=new St(M.data,M.width,M.height);j.type=R.type,"colorSpace"in j?j.colorSpace=R.SRGBColorSpace:j.encoding=R.encoding,j.format=R.format,j.minFilter=R.minFilter,j.magFilter=R.magFilter,j.generateMipmaps=R.generateMipmaps,R.images[V]=j}p===6&&(R.needsUpdate=!0,_&&_(R))}},C,G)}for(let V=0;V<o.length;V++)w(V,m,e,J);return R}setDataType(o){return this.type=o,this.hdrLoader.setDataType(o),this}}const qt="/assets/earth-DvZudj9K.glb",$t="/assets/milkyway-nx-Ds_hwpSC.hdr",Jt="/assets/milkyway-ny-BqhFvupA.hdr",Qt="/assets/milkyway-nz-D6l6T-pv.hdr",en="/assets/milkyway-px-BjIdbMt0.hdr",tn="/assets/milkyway-py-BD6pEbZF.hdr",nn="/assets/milkyway-pz-Bx3WFS88.hdr",an="/assets/milkyway-Vkpv7LbT.jpg",on="_earth_1awhs_1",rn="_loader_1awhs_8",sn="_viewport_1awhs_22",cn="_canvas_1awhs_33",ln="_labels_1awhs_52",un="_label_1awhs_52",dn="_vignette_1awhs_82",pn="_sections_1awhs_94",hn="_section_1awhs_94",ge={earth:on,loader:rn,viewport:sn,canvas:cn,labels:ln,label:un,vignette:dn,sections:pn,section:hn},qe={x:0,y:0,z:2},Ze=(s,o,m)=>s+m*(o-s),st=s=>Object.keys(s).map(o=>parseFloat(Math.round(s[o]*100)/100).toFixed(2)).join(", "),Xe=s=>!s||!s.camera?qe:{x:s.camera[0],y:s.camera[1],z:s.camera[2]},mn=(s,o)=>{const m=(e=0)=>Math.round((e+Number.EPSILON)*100)/100;return m(s==null?void 0:s.x)===m(o==null?void 0:o.x)&&m(s==null?void 0:s.y)===m(o==null?void 0:o.y)&&m(s==null?void 0:s.z)===m(o==null?void 0:o.z)},We={stiffness:80,damping:40,mass:2,restSpeed:.001,restDelta:.001},Ke={stiffness:40,damping:30,mass:2,restSpeed:.001,restDelta:.001},fn={stiffness:40,damping:30},ct=u.createContext({}),xn=({position:s=[0,0,0],scale:o=1,hideMeshes:m=[],labels:e=[],className:J,children:R})=>{const[l,p]=u.useState(!1),[w,V]=u.useState(!1),[_,C]=u.useState(!1),[G,re]=u.useState(!1),M=u.useRef([]),j=u.useRef(),W=u.useRef(),H=u.useRef(),Y=u.useRef(),k=u.useRef(),g=u.useRef(),ee=u.useRef(),se=u.useRef(),te=u.useRef(),a=u.useRef(),f=u.useRef(),r=u.useRef(),b=gt(H),L=u.useRef(),x=u.useRef(Xe(M.current[0])),d=u.useRef([]),y=u.useRef(),T=u.useRef(),ie=u.useRef(),ne=u.useRef(),{width:K,height:Z}=bt(),ue=lt(),O=Te(0,We),I=Te(0,We),ae=Te(0,We),be=Te(0,Ke),we=Te(0,Ke),_e=Te(0,Ke),ye=Te(0,fn),Me=u.useCallback(()=>{if(!b){cancelAnimationFrame(L.current);return}L.current=requestAnimationFrame(Me);const P=ee.current.getDelta();r.current.update(P),y.current.update(),k.current.render(Y.current,g.current),d.current.forEach(v=>{const{element:D,position:X,sprite:q}=v,F=new Q(...X),A=g.current.position.distanceTo(a.current.position),z=g.current.position.distanceTo(q.position)>A;F.project(g.current),F.x=Math.round((.5+F.x/2)*window.innerWidth),F.y=Math.round((.5-F.y/2)*window.innerHeight),D.style.setProperty("--posX",Qe(F.x)),D.style.setProperty("--posY",Qe(F.y)),z?D.dataset.occluded=!0:D.dataset.occluded=!1})},[b]);u.useEffect(()=>{ne.current=!0;const{innerWidth:P,innerHeight:v}=window;k.current=new Mt({canvas:H.current,antialias:!1,alpha:!0,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!0}),k.current.setPixelRatio(1),k.current.outputColorSpace=nt,k.current.toneMapping=xt,g.current=new je(54,P/v,.1,100),g.current.position.x=x.current.x,g.current.position.y=x.current.y,g.current.position.z=x.current.z,g.current.lookAt(0,0,0),O.set(g.current.position.x,!1),I.set(g.current.position.y,!1),ae.set(g.current.position.z,!1),Y.current=new vt,ee.current=new At,te.current=new Lt;const D=new Dt(2236962,.05),X=new jt(16777215,1.5);X.position.set(3,0,1);const q=[D,X];return q.forEach(F=>Y.current.add(F)),y.current=new Xt(g.current,H.current),y.current.enableZoom=!1,y.current.enablePan=!1,y.current.enableDamping=!1,y.current.rotateSpeed=.5,()=>{ne.current=!1,cancelAnimationFrame(L.current),Ct(q),Ot(Y.current),kt(k.current)}},[]),u.useEffect(()=>{const P=()=>{V(!0),O.stop(),I.stop(),ae.stop()},v=()=>{O.set(g.current.position.x,!1),I.set(g.current.position.y,!1),ae.set(g.current.position.z,!1),V(!1)};return y.current.addEventListener("start",P),y.current.addEventListener("end",v),()=>{y.current.removeEventListener("start",P),y.current.removeEventListener("end",v)}},[O,I,ae]),u.useEffect(()=>{if(!l)return;const P=Ve("Chunk",a.current),v=Ve("Atmosphere",a.current),D=(h,N)=>{g.current.position[h]=N},X=O.on("change",h=>D("x",h)),q=I.on("change",h=>D("y",h)),F=ae.on("change",h=>D("z",h)),A=(h,N)=>{P.position[h]=N},de=be.on("change",h=>A("x",h)),z=we.on("change",h=>A("y",h)),U=_e.on("change",h=>A("z",h)),E=ye.on("change",h=>{v.material.opacity=h});return()=>{X(),q(),F(),de(),z(),U(),E()}},[O,I,ae,be,we,_e,l,ye]),u.useEffect(()=>{K<=ut.tablet&&(y.current.enabled=!1)},[K]),u.useEffect(()=>{if(l)return;const P=new Kt,v=new It(k.current);v.compileCubemapShader();const D=async()=>{const A=await Ft.loadAsync(qt);a.current=A.scene,f.current=A.animations,r.current=new zt(a.current),r.current.timeScale=.1,a.current.traverse(async de=>{const{material:z,name:U}=de;U==="Atmosphere"&&(z.alphaMap=z.map),z&&await k.current.initTexture(z)}),a.current.position.x=s[0],a.current.position.y=s[1],a.current.position.z=s[2],a.current.scale.x=o,a.current.scale.y=o,a.current.scale.z=o},X=async()=>{const A=await P.loadAsync([$t,Jt,Qt,en,tn,nn]);A.magFilter=Ce,T.current=v.fromCubemap(A),v.dispose(),await k.current.initTexture(T.current.texture)},q=async()=>{const A=await Ht.loadAsync(an);A.mapping=Yt,A.colorSpace=nt,Y.current.background=A,await k.current.initTexture(A)},F=async()=>{await Promise.all([q(),X(),D()]),a.current.traverse(({material:A})=>{A&&(A.envMap=T.current.texture,A.needsUpdate=!0)}),ne.current&&p(!0)};u.startTransition(()=>{F(),setTimeout(()=>{re(!0)},1e3)})},[l,s,o]),u.useEffect(()=>(l&&!ie.current&&(Y.current.add(a.current),ie.current=!0),l&&b&&(C(!0),Me()),()=>{cancelAnimationFrame(L.current)}),[Me,b,l]),u.useEffect(()=>{l&&(W.current.innerHTML="",d.current=e.map(P=>{const v=document.createElement("div");v.classList.add(ge.label),v.dataset.hidden=!0,v.style.setProperty("--delay",`${P.delay||0}ms`),v.textContent=P.text,W.current.appendChild(v);const D=new Nt;return D.position.set(...P.position),D.scale.set(60,60,1),{element:v,...P,sprite:D}}))},[e,l]),u.useEffect(()=>{k.current.setSize(K,Z),g.current.aspect=K/Z,g.current.updateProjectionMatrix()},[K,Z]),u.useEffect(()=>{const P=H.current,v=D=>{const{innerWidth:X,innerHeight:q}=window,F=st(g.current.position);console.info({cameraPosition:F}),se.current=new ce(D.clientX/X*2-1,-(D.clientY/q)*2+1),te.current.setFromCamera(se.current,g.current);const A=te.current.intersectObjects(Y.current.children,!0);if(A.length>0){const de=st(A[0].point);console.info({clickPosition:de})}};return()=>{P.removeEventListener("click",v)}},[]);const Oe=u.useCallback(()=>{if(!j.current)return;const{offsetTop:P}=j.current,{innerHeight:v}=window,D=window.scrollY-P;let X;const q=z=>{const U=M.current[z].meshes;a.current.traverse(E=>{const{name:h}=E,N=Ve("Chunk",a.current),$=U==null?void 0:U.includes(h),pe=m==null?void 0:m.includes(h);if($)if(h==="Atmosphere")E.visible=!0,ye.set(1);else if(h==="Chunk"){const oe=new Q(-.4,.4,.4);E.visible=!0,ue?E.position.set(...oe.toArray()):(be.set(oe.x),we.set(oe.y),_e.set(oe.z))}else h==="EarthFull"&&N.visible?E.visible=!1:E.visible=!0;else if(pe&&!$)if(h==="Atmosphere")ye.set(0);else if(h==="Chunk"){const oe=new Q(0,0,0);mn(oe,N.position)&&(E.visible=!1),be.set(oe.x),we.set(oe.y),_e.set(oe.z)}else h==="EarthPartial"&&N.visible?E.visible=!0:E.visible=!1})},F=z=>{const U=M.current[z].animations;ue||(f.current.forEach((E,h)=>{U.find(N=>N.includes(h.toString()))||r.current.clipAction(E).reset().stop()}),f.current.length&&M.current[z].animations&&U.forEach(E=>{const h=E.split(":"),N=f.current[Number(h[0])],$=r.current.clipAction(N);(!h[1]||h[1]!=="loop")&&($.clampWhenFinished=!0,$.loop=Bt),$.play()}))},A=z=>{d.current.forEach(E=>{E.hidden&&(E.element.dataset.hidden=!0,E.element.setAttribute("aria-hidden",!0))}),M.current[z].labels.forEach(E=>{d.current.filter(N=>N.text===E).forEach(N=>{N.element.dataset.hidden=!1,N.element.setAttribute("aria-hidden",!1)})})};requestAnimationFrame(()=>{const z=M.current.length-1,U=Math.floor(D/v),E=at(U,0,z),h=M.current[E],N=M.current[E+1],$=Xe(h)||qe,pe=Xe(N)||qe,oe=(D-v*E)/v,xe=at(oe,0,1),ve=Ze($.x,pe.x,xe),Ne=Ze($.y,pe.y,xe),Fe=Ze($.z,pe.z,xe);if(X!==$&&M.current.length&&h&&(q(E),F(E),A(E)),X=$,!w){if(ue){g.current.position.set(ve,Ne,Fe);return}O.set(ve),I.set(Ne),ae.set(Fe)}})},[O,I,ae,be,we,_e,w,m,ye,ue]);u.useEffect(()=>{const P=Gt(Oe,100);return l&&b&&window.addEventListener("scroll",P),()=>{window.removeEventListener("scroll",P)}},[Oe,b,l,ye]);const ke=u.useCallback(P=>{M.current=[...M.current,P]},[]),Ie=u.useCallback(P=>{M.current=M.current.filter(v=>v!==P)},[]);return le.jsx(ct.Provider,{value:{registerSection:ke,unregisterSection:Ie},children:le.jsxs("div",{className:it(ge.earth,J),ref:j,children:[le.jsxs("div",{className:ge.viewport,children:[le.jsx("canvas",{className:ge.canvas,"data-visible":l&&_,"data-grabbing":w,ref:H}),le.jsx("div",{className:ge.labels,"aria-live":"polite",ref:W}),le.jsx("div",{className:ge.vignette})]}),le.jsx("div",{className:ge.sections,children:R}),le.jsx(dt,{unmount:!0,in:!l&&G,timeout:pt(mt.base.durationL),children:P=>le.jsx(ft,{className:ge.loader,"data-visible":P,children:le.jsx(ht,{})})})]})})},vn=u.memo(({children:s,scrim:o,scrimReverse:m,className:e,camera:J=[0,0,0],animations:R=[],meshes:l=[],labels:p=[]})=>{const{registerSection:w,unregisterSection:V}=u.useContext(ct),_=u.useRef(),C=JSON.stringify(R)+JSON.stringify(J)+JSON.stringify(p)+JSON.stringify(l);return u.useEffect(()=>{const G={camera:J,animations:R,meshes:l,labels:p,sectionRef:_};return w(G),()=>{V(G)}},[C,w,V]),le.jsx("div",{className:it(ge.section,e),"data-scrim":o,"data-scrim-reverse":m,ref:_,children:s})});export{xn as Earth,vn as EarthSection};
